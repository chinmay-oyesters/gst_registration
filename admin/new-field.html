<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>New Field - GST Admin</title>
    <!-- Main CSS-->
    <link rel="stylesheet" type="text/css" href="../css/main.css">
    <link rel="stylesheet" type="text/css" href="../css/style.css">
    <!-- Font-icon css-->
    <link rel="stylesheet" type="text/css"
        href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- axios -->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>

<body class="app sidebar-mini">
    <!-- NOTE: START: -->
    <!-- loader -->
    <div class="overlay"></div>
    <div class="spanner">
        <div class="loader"></div>
        <!-- <p>Uploading music file, please be patient.</p> -->
    </div>
    <!-- END: -->
    <!-- Navbar-->
    <header class="app-header"><a class="app-header__logo" href="home.html">GST Admin</a>
        <!-- Sidebar toggle button--><a class="app-sidebar__toggle" href="#" data-toggle="sidebar"
            aria-label="Hide Sidebar"></a>
        <!-- Navbar Right Menu-->
        <ul class="app-nav">
            <!-- User Menu-->
            <li class="dropdown"><a class="app-nav__item" href="#" data-toggle="dropdown"
                    aria-label="Open Profile Menu"><i class="fa fa-user fa-lg"></i></a>
                <ul class="dropdown-menu settings-menu dropdown-menu-right">
                    <li><a class="dropdown-item" href="profile.html"><i class="fa fa-user fa-lg"></i> Profile</a></li>
                    <li><a class="dropdown-item" href="#" onclick="adminSignOut()"><i class="fa fa-sign-out fa-lg"></i>
                            Logout</a>
                    </li>
                </ul>
            </li>
        </ul>
    </header>
    <!-- Sidebar menu-->
    <div class="app-sidebar__overlay" data-toggle="sidebar"></div>
    <aside class="app-sidebar">
        <div class="app-sidebar__user"><img class="app-sidebar__user-avatar"
                src="data:image/png;base64,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"
                alt="User Image">
            <div>
                <p class="app-sidebar__user-name">John Doe</p>
                <p class="app-sidebar__user-designation">Admin</p>
            </div>
        </div>
        <ul class="app-menu">
            <li><a class="app-menu__item " href="dashboard.html"><i class="app-menu__icon fa fa-dashboard"></i><span
                        class="app-menu__label">Dashboard</span></a>
            </li>
            <li class="treeview"><a class="app-menu__item " href="#" data-toggle="treeview"><i
                        class="app-menu__icon fa fa-user"></i><span class="app-menu__label">Users</span><i
                        class="treeview-indicator fa fa-angle-right"></i></a>
                <ul class="treeview-menu">
                    <li><a class="treeview-item " href="staff.html"><i class="icon fa fa-circle-o"></i> Staff</a>
                    </li>
                    <li><a class="treeview-item " href="customer.html"><i class="icon fa fa-circle-o"></i>
                            Customer</a>
                    </li>
                </ul>
            </li>
            <li><a class="app-menu__item" href="roles.html"><i class="app-menu__icon fa fa-male"
                        aria-hidden="true"></i><span class="app-menu__label">Roles</span></a></li>
            <li><a class="app-menu__item" href="payments.html"><i class="app-menu__icon fa fa-money"></i><span
                        class="app-menu__label">Payments</span></a></li>
            <li><a class="app-menu__item" href="forms.html"><i class="app-menu__icon fa fa-file-text-o"
                        aria-hidden="true"></i><span class="app-menu__label">Forms</span></a></li>
            <li><a class="app-menu__item" href="fields.html"><i class="app-menu__icon fa fa-align-center"
                        aria-hidden="true"></i><span class="app-menu__label">Fields</span></a></li>
            <li class="treeview"><a class="app-menu__item" href="#" data-toggle="treeview"><i
                        class="app-menu__icon fa fa-cog"></i><span class="app-menu__label">Settings</span><i
                        class="treeview-indicator fa fa-angle-right"></i></a>
                <ul class="treeview-menu">
                    <li><a class="treeview-item " href="integrations.html"><i
                                class="icon fa fa-circle-o"></i>Integrations</a></li>
                    <li><a class="treeview-item" href="customize.html"><i class="icon fa fa-circle-o"></i>Customize
                            Forms</a></li>
                </ul>
            </li>
        </ul>
    </aside>
    <main class="app-content">
        <div class="app-title">
            <div>
                <h1><i class="fa fa-file-text" aria-hidden="true"></i>&nbsp;New Field</h1>
            </div>
        </div>
        <div class="tile">
            <div class="tile-body">
                <form action="" id="new_form_id">
                    <div class="form-group row mt-4">
                        <label class="control-label col-md-3">Field Title</label>
                        <div class="col-md-8">
                            <input class="form-control" type="text" placeholder="-" id="field_title">
                        </div>
                    </div>
                    <div class="form-group row mt-4">
                        <label class="control-label col-md-3">Field Type</label>
                        <div class="col-md-8">
                            <select class="form-control" id="field_type" onchange="updateFieldType(event.target.value)">
                                <option value="">-- Select Field --</option>
                                <option value="Text">Text</option>
                                <option value="Dropdown">Dropdown</option>
                                <option value="Multi-Select">Multi-Select Dropdown</option>
                                <option value="Toggle">Toggle</option>
                                <option value="Date">Date</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group row mt-4">
                        <label class="control-label col-md-3">Field Tag</label>
                        <div class="col-md-8">
                            <input class="form-control" type="text" placeholder="-" id="field_tag">
                        </div>
                    </div>
                    <div id="validation_type_container">
                    </div>
                    <div class="form-group row mt-4">
                        <label class="control-label col-md-3">Is Required</label>
                        <div class="col-md-8">
                            <label style="width: 80px;margin-left: 20px;" class="form-check-label" for="optionsRadios1">
                                <input class="form-check-input" id="optionsRadios1" type="radio" name="optionsRadios"
                                    value="true">True
                            </label>
                            <label class="form-check-label" for="optionsRadios2">
                                <input class="form-check-input" id="optionsRadios2" type="radio" name="optionsRadios"
                                    value="false">False
                            </label>
                        </div>
                    </div>
                    <div class="mb-5" id="value_container">

                    </div>
                    <div class="form-group row mt-4">
                        <label class="control-label col-md-3">Select Associate Field</label>
                        <div class="col-md-8  d-flex">
                            <select class="form-control" id="fields_dropdown">
                            </select>
                            <button onclick="addFieldToTable()" class="btn btn-success pl-5 pr-5 ml-4"
                                type="button">Add</button>
                        </div>
                    </div>
                    <div>
                        <p class="mt-4 mb-3">Selected Associate Fields</p>
                        <table class="table table-hover table-bordered">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Field Name</th>
                                    <th>Field Type</th>
                                    <th>Require</th>
                                    <th align="center" style="width: 100px;text-align: center;">Sort</th>
                                    <th align="center" style="width: 100px;text-align: center;">Action</th>
                                </tr>
                            </thead>
                            <tbody id="fields_table">

                            </tbody>
                        </table>
                    </div>
                    <div class="mt-5 mb-5 d-flex justify-content-end">
                        <button type="button" class="btn btn-success" onclick="submitForm()">Sumbit</button>
                    </div>
                </form>
            </div>
        </div>
    </main>
    <!-- add value modal -->
    <div class="modal fade" id="add_modal" role="dialog">
        <div class="modal-dialog modal-lg modal-dialog-centered ">

            <!-- Modal content-->

            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Add Value<br />
                        <p style="text-align:left; font-size:13px;font-weight:500;">
                        <p>
                    </h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body">
                    <form class="form-horizontal" id="add_modal_form">
                        <div class="form-group row">
                            <label class="control-label col-md-3">Value</label>
                            <div class="col-md-8">
                                <input class="form-control" type="text" placeholder="-" id="add_value">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="control-label col-md-3">Associated To</label>
                            <div class="col-md-8">
                                <select class="form-control" style="width: 100%;" id="associated_fields_dropdown">
                                </select>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="control-label col-md-3">Multiplied To</label>
                            <div class="col-md-8">
                                <select class="form-control" style="width: 100%;" id="multiplied_fields_dropdown">
                                </select>
                            </div>
                        </div>
                        <div class="d-flex justify-content-center">
                            <button class="btn btn-sm btn-success" type="button" onclick="addAssociatedFildTo()">Add
                                Associate</button>
                        </div>
                        <div>
                            <p class="mt-4 mb-3">Associate Fields</p>
                            <table class="table table-hover table-bordered">
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>Associated To</th>
                                        <th>Multiplied To</th>
                                        <th align="center" style="width: 100px;text-align: center;">Action</th>
                                    </tr>
                                </thead>
                                <tbody id="assocoated_to_table">

                                </tbody>
                            </table>
                        </div>
                        <div class="modal-footer " style="justify-content: center;margin-top:20px;">
                            <button class="btn btn-success" type="button" onclick="submitModal()">Submit</button>
                        </div>
                    </form>
                </div>
            </div>

        </div>
    </div>
    <!-- Essential javascripts for application to work-->
    <script src="../js/jquery-3.3.1.min.js"></script>
    <script src="../js/popper.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/main.js"></script>
    <script src="../js/globalFunction.js"></script>
    <!-- Data table plugin-->
    <script type="text/javascript" src="../js/plugins/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="../js/plugins/dataTables.bootstrap.min.js"></script>
    <script type="text/javascript">$('#sampleTable').DataTable();</script>
    <!-- alert  -->
    <script type="text/javascript" src="../js/plugins/bootstrap-notify.min.js"></script>
    <script type="text/javascript" src="../js/plugins/sweetalert.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <script type="text/javascript">
        authenticateAdmin();
        // value fields
        let valueList = [];
        let valueAssociateList = [];
        let valueMultiplyedList = [];
        let values_table = document.getElementById('values_table')
        let associated_fields_dropdown = document.getElementById('associated_fields_dropdown')
        let multiplied_fields_dropdown = document.getElementById('multiplied_fields_dropdown')
        let assocoated_to_table = document.getElementById('assocoated_to_table')


        //  associate fields
        $(document).ready(function () {
            $('#fields_dropdown').select2();
            $('#associated_fields_dropdown').select2();
            $('#multiplied_fields_dropdown').select2();
        });
        let fieldsList = [];
        let selectdFields = [];
        let fields_dropdown = document.getElementById('fields_dropdown')
        let fields_table = document.getElementById('fields_table')
        window.onload = function () {
            getList()
            updateAssociatedToTableInModal()
        }
        function getList() {
            startLoader()
            axiosInstance.get('fetch_admin_form_fields').then((response) => {
                endLoader()
                if (response.status === 200) {
                    let dataSet = response?.data?.fields
                    fieldsList = dataSet
                    updateFields()
                } else {
                    if (response?.data?.is_logged_out) {
                        localStorage.setItem("isAdminLoggedIn", "false");
                        location.href = "index.html";
                    } else {
                        $.notify({
                            title: "",
                            message: response.data?.msg,
                            icon: 'fa fa-times'
                        }, {
                            type: "danger",
                        });
                    }
                }
            }, (error) => {
                console.log('error', error);
                endLoader()
                $.notify({
                    title: "",
                    message: `Something went wrong! Please try again.`,
                    icon: 'fa fa-times'
                }, {
                    type: "danger"
                });
            })
        }
        function openModal() {
            if (document.getElementById('field_type').value == 'Toggle') {
                if (valueList?.length == 2) {
                    setTimeout(() => {
                        $('#add_modal').modal('hide');
                    }, 1000);
                    $.notify({
                        title: "",
                        message: `Two value already selected`,
                        icon: 'fa fa-times'
                    }, {
                        type: "danger"
                    });
                    return
                }
            }
            let dataSet = fieldsList
            associated_fields_dropdown.innerHTML = ''
            associated_fields_dropdown.innerHTML = `<option value="none">none</option>`
            for (let i = 0; i < dataSet.length; i++) {
                const element = dataSet[i];
                if (!valueAssociateList?.includes(`${element?.field_id}`)) {
                    associated_fields_dropdown.innerHTML = associated_fields_dropdown.innerHTML +
                        `<option value='${element?.field_id}' >${element?.field_name} - ${element?.field_type}${element?.required == '1' ? `<span style="color:red;" >&nbsp;*<span>` : ""}</option>`
                }
            }
            multiplied_fields_dropdown.innerHTML = '';
            multiplied_fields_dropdown.innerHTML = `<option value="none">none</option>`
            for (let i = 0; i < dataSet.length; i++) {
                const element = dataSet[i];
                multiplied_fields_dropdown.innerHTML = multiplied_fields_dropdown.innerHTML +
                    `<option value='${element?.field_id}' >${element?.field_name} - ${element?.field_type}${element?.required == '1' ? `<span style="color:red;" >&nbsp;*<span>` : ""}</option>`
            }
            assocoated_to_table.innerHTML = '';
            assocoated_to_table.innerHTML = '<tr><td align="center" colspan="6" class="p-5">No field selected</td></tr>'
        }
        function addAssociatedFildTo() {
            let associatedToNow = associated_fields_dropdown.value
            let multipliedToNow = multiplied_fields_dropdown.value
            if (associatedToNow == 'none') {
                $.notify({
                    title: "",
                    message: `Please select associated to.`,
                    icon: 'fa fa-times'
                }, {
                    type: "danger"
                });
                return
            }
            let nowValueAssociateList = [...valueAssociateList]
            nowValueAssociateList?.push(associatedToNow)
            let nowValueMultiplyedList = [...valueMultiplyedList]
            if (multipliedToNow == 'none') {
                nowValueMultiplyedList?.push('')
            } else {

                nowValueMultiplyedList?.push(multipliedToNow)
            }

            valueAssociateList = nowValueAssociateList
            valueMultiplyedList = nowValueMultiplyedList

            let dataSet = fieldsList
            associated_fields_dropdown.innerHTML = ''
            associated_fields_dropdown.innerHTML = `<option value="none">none</option>`
            for (let i = 0; i < dataSet.length; i++) {
                const element = dataSet[i];
                if (!valueAssociateList?.includes(`${element?.field_id}`)) {
                    associated_fields_dropdown.innerHTML = associated_fields_dropdown.innerHTML +
                        `<option value='${element?.field_id}' >${element?.field_name} - ${element?.field_type}${element?.required == '1' ? `<span style="color:red;" >&nbsp;*<span>` : ""}</option>`
                }
            }
            multiplied_fields_dropdown.innerHTML = '';
            multiplied_fields_dropdown.innerHTML = `<option value="none">none</option>`
            for (let i = 0; i < dataSet.length; i++) {
                const element = dataSet[i];
                multiplied_fields_dropdown.innerHTML = multiplied_fields_dropdown.innerHTML +
                    `<option value='${element?.field_id}' >${element?.field_name} - ${element?.field_type}${element?.required == '1' ? `<span style="color:red;" >&nbsp;*<span>` : ""}</option>`
            }
            updateAssociatedToTableInModal()
        }
        function updateAssociatedToTableInModal() {
            assocoated_to_table.innerHTML = ''
            if (valueAssociateList?.length == valueMultiplyedList?.length) {
                for (let i = 0; i < valueAssociateList.length; i++) {
                    let asObje = fieldsList?.filter(fl => fl?.field_id == valueAssociateList[i])
                    let mulVal = '';
                    if (valueMultiplyedList[i] != '') {
                        let mulObje = fieldsList?.filter(fl => fl?.field_id == valueMultiplyedList[i])
                        if (mulObje?.length > 0) {
                            mulVal = mulObje[0].field_name
                        }
                    }
                    if (asObje?.length > 0)
                        assocoated_to_table.innerHTML = assocoated_to_table.innerHTML +
                            `<tr>
                        <td>${i + 1}</td>
                        <td>${asObje[0]?.field_name}</td>
                        <td>${mulVal}</td>
                        <td align="center" ><i class="fa fa-trash text-danger cp" onclick="removeFieldFromAssociatedTo('${i}')" aria-hidden="true"></i></td>
                     </tr>
                    `

                }
                if (valueAssociateList?.length == 0) {
                    assocoated_to_table.innerHTML = '<tr><td align="center" colspan="6" class="p-5">No field selected</td></tr>'
                }
            } else {
                valueAssociateList = [];
                valueMultiplyedList = [];
            }
        }
        function removeFieldFromAssociatedTo(idx) {
            let nowValueAssociateList = valueAssociateList;
            nowValueAssociateList.splice(idx, 1);
            valueAssociateList = [...nowValueAssociateList]
            let nowValueMultiplyedList = valueMultiplyedList;
            nowValueMultiplyedList.splice(idx, 1);
            valueMultiplyedList = [...nowValueMultiplyedList]
            updateAssociatedToTableInModal()
        }
        function submitModal() {
            let add_value = document.getElementById('add_value').value
            if (add_value == '') {
                $.notify({
                    title: "",
                    message: `Please enter value.`,
                    icon: 'fa fa-times'
                }, {
                    type: "danger"
                });
                return
            }
            let finalArray = [add_value]
            if (valueAssociateList?.length == valueMultiplyedList?.length) {
                for (let i = 0; i < valueAssociateList.length; i++) {
                    let strNow = valueAssociateList[i]
                    if (valueMultiplyedList[i] != '') {
                        strNow = `${strNow}x${valueMultiplyedList[i]}`
                    }
                    finalArray?.push(strNow)
                }
            } else {
                valueAssociateList = []
                valueMultiplyedList = []
            }
            let nowValList = [...valueList]
            nowValList?.push(finalArray)
            valueList = nowValList
            $('#add_modal_form')[0].reset();
            $('#add_modal').modal('hide');
            valueAssociateList = []
            valueMultiplyedList = []
            console.log(valueList)
            updateValueTable()
        }
        function updateValueTable() {
            console.log(valueList)
            values_table.innerHTML = ''
            if (valueList?.length != 0) {
                for (let i = 0; i < valueList.length; i++) {
                    const element = valueList[i];
                    const elementTpp = [];
                    for (let j = 0; j < valueList[i].length; j++) {
                        if (j !== 0 && j !== 1) elementTpp?.push(valueList[i][j])
                    }
                    console.log(element)
                    console.log(elementTpp)
                    values_table.innerHTML = values_table.innerHTML +
                        `<tr>
                    <td rowspan='${element?.length == 1 ? 1 : element?.length - 1}'>${i + 1}</td>
                    <td rowspan='${element?.length == 1 ? 1 : element?.length - 1}' >${element[0]}</td>
                    ${element?.length > 1 ?
                            `<td>${splitValue('-x', element[1])}</td><td>${splitValue('x-', element[1])}</td>` : '<td>-</td><td>-</td>'
                        }
                    <td align="center" rowspan='${element?.length == 1 ? 1 : element?.length - 1}' ><i class="fa fa-trash text-danger cp" onclick="removeFieldFromValueTable('${i}')" aria-hidden="true"></i></td>
                    </tr>
                    `
                    values_table.innerHTML = values_table.innerHTML +
                        `${elementTpp?.map((el) => (`
                      <tr>
                    <td>${splitValue('-x', el)}</td><td>${splitValue('x-', el)}</td>
                    </tr>
                    `)).join('')}`

                }
            } else {
                values_table.innerHTML = '<tr><td align="center" colspan="6" class="p-5">No field selected</td></tr>'
            }
        }
        function splitValue(mode, value) {
            console.log(mode, value)
            let idnow = ''
            if (value?.includes('x')) {
                if (mode == '-x') {
                    idnow = value.split("x")[0];
                } else {
                    idnow = value.split("x")[1];
                }
                let fildNow = fieldsList?.filter(fl => fl?.field_id == idnow)
                if (fildNow?.length != 0) {
                    return fildNow[0]?.field_name
                } else return ''
            } else {
                if (mode == '-x') {
                    let fildNow = fieldsList?.filter(fl => fl?.field_id == value)
                    if (fildNow?.length != 0) {
                        return fildNow[0]?.field_name
                    }
                }
                else return '-'
            }

        }
        function removeFieldFromValueTable(idx) {
            let nowSelecteValues = valueList;
            nowSelecteValues.splice(idx, 1);
            valueList = [...nowSelecteValues]
            updateValueTable()
        }
        function updateFields() {
            let dataSet = fieldsList
            fields_dropdown.innerHTML = ''
            fields_dropdown.innerHTML = `<option value=""> -- Select Field -- </option>`
            for (let i = 0; i < dataSet.length; i++) {
                const element = dataSet[i];
                if (!selectdFields?.includes(element?.field_id)) {
                    fields_dropdown.innerHTML = fields_dropdown.innerHTML +
                        `<option value='${element?.field_id}' >${element?.field_name} - ${element?.field_type}${element?.required == '1' ? `<span style="color:red;" >&nbsp;*<span>` : ""}</option>`
                }
            }
            fields_table.innerHTML = ''
            for (let j = 0; j < selectdFields.length; j++) {
                let element = fieldsList?.filter(fs => fs?.field_id == selectdFields[j])
                if (element?.length > 0) {
                    fields_table.innerHTML = fields_table.innerHTML +
                        `<tr><td>${j + 1}</td><td>${element[0]?.field_name}</td><td>${element[0]?.field_type}</td><td>${element[0]?.required == '1' ? 'true' : 'false'}</td><td align="center"><i class="fa fa-long-arrow-up cp" onclick="sortTable('up','${j}');" aria-hidden="true"></i>&nbsp;&nbsp;<i onclick="sortTable('down','${j}');"  class="fa fa-long-arrow-down cp" aria-hidden="true"></i></td><td align="center" ><i class="fa fa-trash text-danger cp" onclick="removeField('${j}')" aria-hidden="true"></i></td></tr>`
                }
            }
            if (selectdFields?.length == 0) {
                fields_table.innerHTML = '<tr><td align="center" colspan="6" class="p-5">No field selected</td></tr>'
            }
        }
        function addFieldToTable() {
            let fields_dropdown = document.getElementById('fields_dropdown')
            if (fields_dropdown.value) {
                selectdFields?.push(fields_dropdown.value)
                updateFields()
                fields_dropdown.value = ''
            }
        }
        function removeField(idx) {
            let nowSelectedFields = selectdFields;
            nowSelectedFields.splice(idx, 1);
            selectdFields = [...nowSelectedFields]
            updateFields()
        }
        function sortTable(mode, idx) {
            let nowSelectedFields = selectdFields;
            let oldIndex = parseInt(idx);
            if (mode == 'up') {
                if (oldIndex != 0) {
                    arrayMove(nowSelectedFields, oldIndex, oldIndex - 1)
                }
            } else if (mode == 'down') {
                if (oldIndex !== nowSelectedFields?.length - 1) {
                    arrayMove(nowSelectedFields, oldIndex, oldIndex + 1)
                }
            }
            selectdFields = nowSelectedFields
            updateFields()
        }
        function updateFieldType(value) {
            console.log(value)
            valueList = []
            valueAssociateList = [];
            valueMultiplyedList = [];
            if (value == "Text") {
                document.getElementById('validation_type_container').innerHTML =
                    `                        <div class="form-group row mt-4">
                            <label class="control-label col-md-3">Validation Type</label>
                            <div class="col-md-8">
                                <select class="form-control" id="field_validation">
                                    <option value="">none</option>
                                    <option value="Email">Email</option>
                                    <option value="Number">Number</option>
                                    <option value="Mobile-Number">mobile number</option>
                                    <option value="PAN">PAN</option>
                                    <option value="Alpha-Numeric">Alpha-Numeric</option>
                                </select>
                            </div>
                        </div>`
                document.getElementById('value_container').innerHTML = ''
            } else if (value == 'Dropdown' || value == 'Single-Select' || value == 'Multi-Select' || value == 'Toggle') {
                document.getElementById('value_container').innerHTML = `
                <div class="form-group row mt-4">
                            <label class="control-label col-md-3">Field Values</label>
                            <div class="col-md-8  d-flex justify-content-end">
                                <button class="btn btn-success pl-5 pr-5 ml-4" type="button" data-toggle="modal"
                                    data-target="#add_modal" onclick="openModal()">Add Value</button>
                            </div>
                        </div>
                        <table class="table table-hover table-bordered">
                            <thead>
                                <tr>
                                    <th style="width: 40px;">#</th>
                                    <th>Value</th>
                                    <th>Associated To</th>
                                    <th>Multiplied To</th>
                                    <th align="center" style="width: 100px;text-align: center;">Action</th>
                                </tr>
                            </thead>
                            <tbody id="values_table">
                                <tr><td align="center" colspan="6" class="p-5">No field selected</td></tr>
                            </tbody>
                        </table>`
                document.getElementById('validation_type_container').innerHTML = ''
                values_table = document.getElementById('values_table')
            } else {
                document.getElementById('validation_type_container').innerHTML = ''
                document.getElementById('value_container').innerHTML = ''
            }
        }
        function submitForm() {
            startLoader()
            let field_title = document.getElementById('field_title')
            let field_type = document.getElementById('field_type')
            let field_tag = document.getElementById('field_tag')
            let optionsRadios1 = document.getElementById('optionsRadios1')
            let optionsRadios2 = document.getElementById('optionsRadios2')
            if (field_title?.value == "" || field_type?.value == "" || (optionsRadios1?.checked == false && optionsRadios2?.checked == false)) {
                $.notify({
                    title: "",
                    message: `Please enter all fields.`,
                    icon: 'fa fa-times'
                }, {
                    type: "danger"
                });
                endLoader()
                return
            }
            if (field_type?.value == 'Toggle') {
                if (valueList?.length != 2) {
                    $.notify({
                        title: "",
                        message: `Please enter 2 value.`,
                        icon: 'fa fa-times'
                    }, {
                        type: "danger"
                    });
                    endLoader()
                    return
                }
            }
            let dataSet = {
                "field_title": field_title?.value,
                "field_tag1": field_tag?.value,
                "field_type": field_type?.value,
                "field_associated_to": selectdFields,
                "field_required": optionsRadios1?.checked
            }
            if (field_type?.value == 'Text') {
                let field_validation = document.getElementById('field_validation')
                dataSet['field_validation'] = field_validation.value
            } else if (field_type?.value == 'Dropdown' || field_type?.value == 'Single-Select' || field_type?.value == 'Multi-Select' || field_type?.value == 'Toggle') {
                dataSet['field_values'] = valueList
            } else {
                dataSet['field_validation'] = null
            }
            axiosInstance.post('add_field', dataSet).then((response) => {
                endLoader()
                if (response.status === 200) {
                    $.notify({
                        title: "",
                        message: response.data?.msg,
                        icon: 'fa fa-check'
                    }, {
                        type: "success",
                    });
                    setTimeout(() => {
                        location.href = 'fields.html'
                    }, 200);
                } else {
                    if (response?.data?.is_logged_out) {
                        localStorage.setItem("isAdminLoggedIn", "false");
                        location.href = "index.html";
                    } else {
                        $.notify({
                            title: "",
                            message: response.data?.msg,
                            icon: 'fa fa-times'
                        }, {
                            type: "danger",
                        });
                    }
                }
            }, (error) => {
                console.log('error', error);
                endLoader()
                $.notify({
                    title: "",
                    message: `Something went wrong! Please try again.`,
                    icon: 'fa fa-times'
                }, {
                    type: "danger"
                });
            })
        }
    </script>
</body>

</html>